<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focal X - Node.js Bootcamp: Lecture 6 </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .footer {
            padding-top: 30px;
        }

        .footer a {
            color: black;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .coach {
            background-color: white;
            width: 80px;
            border-radius: 0 0 50% 0;
            color: black;
            padding: 10px;
            position: absolute;
            left: 0;
            top: 0;
        }
        
        header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            height: 65vh;
        }
        
        .lecture-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }
        
        .interactive-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
            font-size: 1.5rem;
        }
        
        h3 {
            color: #2980b9;
            margin: 20px 0 12px;
            font-size: 1.2rem;
        }
        
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 12px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 12px 0;
            font-size: 0.9rem;
        }
        
        code {
            font-family: 'Fira Code', monospace;
        }
        
        .question {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            margin: 12px 0;
        }
        
        .option {
            padding: 10px;
            background: #e8f4fc;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 0.9rem;
        }
        
        .option:hover {
            background: #d1e9fa;
        }
        
        .correct {
            background: #d4edda;
            border: 1px solid #c3e6cb;
        }
        
        .incorrect {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        
        .task {
            background: #fff3cd;
            padding: 12px;
            border-left: 5px solid #ffc107;
            margin: 15px 0;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s;
            margin-top: 8px;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .result {
            margin-top: 12px;
            padding: 12px;
            border-radius: 5px;
            display: none;
            font-size: 0.9rem;
        }
        
        .search-task {
            background: #e7f5e9;
            padding: 12px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 5px solid #28a745;
            font-size: 0.9rem;
        }
        
        .tabs {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 8px 15px;
            cursor: pointer;
            background: #f1f1f1;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .tab.active {
            background: #6f42c1;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
            font-size: 0.9rem;
        }
        
        .comparison-table th, .comparison-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        .comparison-table th {
            background-color: #3498db;
            color: white;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        @media (max-width: 900px) {
            .content {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .lecture-content, .interactive-section {
                height: 50vh;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <p class="coach">Moones Mezher</p>
        <header>
            <h1 id="lecture-title">Focal X - Node.js Bootcamp</h1>
            <p class="subtitle" id="lecture-subtitle">Advanced JavaScript: Promises, Event Loop, Regex</p>
        </header>
        
        <div class="content">
            <div class="lecture-content">
                <h2>Lecture Content</h2>
                <div id="tabs-container"></div>
                <div id="tab-content-container"></div>
            </div>
            
            <div class="interactive-section">
                <h2>Interactive Questions & Tasks</h2>
                <div id="questions-container"></div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2025 <a rel="noopener" href="https://focal-x.com/" target="_blank">Focal X</a> All Right Reserved</p>
    </footer>

    <script>
        // ==================== CONFIGURATION ====================
        // Update these arrays to change the content of your lecture
        
        // Lecture metadata
        const lectureConfig = {
            title: "Focal X - Node.js Bootcamp",
            subtitle: "Advanced JavaScript: Promises, Async/Await, Event Loop, Regex"
        };
        
        // Lecture content organized by tabs
        const lectureContent = [
            {
                tabTitle: "Last Lesson",
                title: "Last Lesson Recap",
                content: `/*
1- Solve Task 1
2- Semicolons (ASI)
*/`
            },
            {
                table: {
                    headers: ["", "Description"],
                    rows: [
                        ["Synchronous", "Executes line by line consecutively in a sequental manner, code that waites for an operation to complete"],
                        ["Asynchronous","Allows multiple operations to be perfomed consecutively without waiting, handled with: Callbacks, Promises, Async/Await"],
                    ]
                },
                tabTitle: "Asynchronous",
                title: "JavaScript Asynchronous",
                content: `// Synchronous: Executes line by line consecutively in a sequental manner
// Code that waites for an operation to complete

// Asynchronous: Allows multiple operations to be perfomed consecutively without waiting
// Handled with: Callbacks, Promises, Async/Await

// Promises represent the eventual completion of an asynchronous operation

// Promise => an object that  mNGES ASYNC operations
// "I promise to return a value"
// PENDING -> RESOLVED or REJECTED
// Form: new Promise((resolve, reject) => { async code })

// Creating a promise
const promise = new Promise((resolve, reject) => {
    // Simulate complex code
    for(let i = 0; i < 1_000_000_000; i++) {}
    
    const data = Math.random();
    
    if(data < 0.5) {
        resolve(data); // Success
    } else {
        reject("Error"); // Failure
    }
});

// Using .then() and .catch()
promise
    .then((data) => {
        console.log(data);
    })
    .catch((err) => {
        console.log(err);
    })
    .finally(() => {
        console.log("Completed");
    });

// Chores Example: (Callback Hell -> Promise)
1. Walk The Dog
2. Clean The Kitchen
3. Take Out The Trash

// Converting to async/await 

// Async/Await -> Special Keys in JavaScript, allows you write async code in a sync manner

// Async -> makes a function return a promise
// Await -> makes an async function wait for a promise 

const app = async () => {
    try {
        const data = await promise;
        console.log("Success:", data);
    } catch (error) {
        console.log("Error:", error);
    }
};
app();

// Real-world example: API call simulation
function fetchUserData() {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            const success = Math.random() > 0.3;
            if (success) {
                resolve({ name: "Alice", age: 30 });
            } else {
                reject("Failed to fetch user data");
            }
        }, 2000);
    });
}

// Using the promise
fetchUserData()
    .then(user => console.log("User:", user))
    .catch(error => console.error("Error:", error));

// Using Promise.all() with arrays
const promise1 = Promise.resolve(3);
const promise2 = new Promise((resolve) => setTimeout(resolve, 100, 'foo'));
const promise3 = fetchUserData();

Promise.all([promise1, promise2, promise3])
    .then(values => console.log(values))
    .catch(error => console.error(error));`
            },
            {
                tabTitle: "Event Loop",
                title: "JavaScript Event Loop",
                content: `// Question: who is know about this concept?

/*
- Node is not a framework, it is a runtime. => interpreter.
=> there are a huge deffrince between framework and library and runtime.
- JS on browser BY V8 Engine => 2008: JS on server = node js

Question: who is know the deffrince between Compiler & Intrpreter?

- Compiler Vs. Interpreter:
=> code => compile => machine code => output
=> code => interprete => output

=> Node js is a runtime and is not a compiler.

- 1- Node js is single threaded (line by line) => one thread is work
- 2- Node.js uses libuv for async I/O (not truly single-threaded)

- Event loop check each time on (Task Queue & Microtask Queue) then => execute if the Call stack is empty. 
- Microtask Queue > Task Queue
*/

// Call stack => output
console.log("1");

// Call stack add it to => Web APIs then => execute the callback in Task Queue => output
setTimeout(() => {
    console.log("2");
}, 0) 

// Call stack add it to => Web APIs then => execute the callback in Microtask Queue => output
Promise.resolve()
.then(() => {
    console.log("3");
})

// Call stack => output
console.log("4");

// Output order: 1, 4, 3, 2`
            },
            {
                tabTitle: "Regex",
                title: "Regular Expressions (Regex)",
                content: `// Question: who is know about this concept?

/*
- Is => A Regular Expression (RegEx) is a sequence of characters defining a search pattern. It is used for:
    - Validating input (e.g., emails, passwords). => like emails in websites
    - Searching/Extracting specific text from strings.
    - Replacing parts of strings.
*/

const regex = /hello/; // another way: 
console.log(regex.test('hello')); // true
console.log(regex.test('hello world')); // true

// Ex: smart search in websites
const colors = ["red", "green", "yellow", "black", "white"];

function search(key) {
    return colors.filter(e => e === key);
}

function smartSearch(key) {
    const regex = new RegExp(\`.*\${key}.*\`, 'i');   
    return colors.filter(e => e.match(regex));
}

console.log(search("re")); // []
console.log(smartSearch("re")); // ["red", "green"]

// - Real World Example:
const emailRegex = /^[\\w.-]+@[\\w.-]+\\.\\w{2,}$/;
console.log(emailRegex.test('user@example.com')); // true
console.log(emailRegex.test('userexample.com')); // false`,
table: {
    headers: ["Pattern", "Description", "Example"],
    rows: [
        ["\\d","Match any digit ([0-9]).", "/\\d/ → \"5\" in \"a5\""],
        ["\\s","Match whitespace (space, tab, etc.)." ,"/\\s/ → \" \""],
        ["\\w", "Match word character ([a-zA-Z0-9_])." , "/\\w+/ → \"hello\""],
        [".", "Match any character except newline.", "/a.c/ → \"abc\""],
        ["^", "Start of string/line.", "/^abc/ → \"abc\" at start"],
        ["$", "End of string/line.", "/xyz$/ → \"xyz\" at end"],
        ['[abc]','Match any of a, b, or c.', '/[aeiou]/ → "e"'],
        ['[^abc]', 'Match anything not a, b, or c.','/[^0-9]/ → "a" in "a1"'],
        ['a|b','Match a or b.', '/yes|no/ → "yes"'],
        ['()','Capture group.', '/(\\d{2})-(\\d{2})/ → Groups in "12-34"'],
        ['{n}','Exact n repetitions.', '/\\d{3}/ → "123"'],
        ['{n,}','At least n repetitions.', '/\\d{2,}/ → "123"'],
        ['{n,m}','Between n and m repetitions.', '/\\d{2,4}/ → "123"'],
        ['"*"','Zero or more repetitions.', '/a"*"/ → "aaa"'],
        ['"+"','One or more repetitions.', '/a+/ → "aaa"'],
        ['"?"','Zero or one repetition.', '/a?/ → "a" or ""']
    ]
}
            },
            ];
        
        // Questions and tasks
        const questions = [
            {
                type: "question",
                question: "What is the main difference between synchronous and asynchronous JavaScript execution?",
                options: [
                    "Synchronous executes code line by line waiting for each operation to complete, asynchronous allows multiple operations without waiting.",
                    "Synchronous allows multiple operations without waiting, asynchronous executes line by line.",
                    "Synchronous uses callbacks, asynchronous uses promises.",
                    "Synchronous is faster than asynchronous."
                ],
                correctIndex: 0
            },
            {
                type: "question",
                question: "Given the following promise code, what will be logged if Math.random() returns 0.7?",
                code: `const promise = new Promise((resolve, reject) => {
    const data = 0.7;
    if(data < 0.5) {
        resolve(data);
    } else {
        reject("Error");
    }
});
promise
    .then(data => console.log("Success:", data))
    .catch(err => console.log("Failure:", err))
    .finally(() => console.log("Completed"));`,
                options: [
                    "Success: 0.7\nCompleted",
                    "Failure: Error\nCompleted",
                    "Completed\nSuccess: 0.7",
                    "Completed\nFailure: Error"
                ],
                correctIndex: 1
            },
            {
                type: "question",
                question: "In the JavaScript event loop, which queue has higher priority and is processed first?",
                options: [
                    "Task Queue",
                    "Microtask Queue",
                    "Call Stack",
                    "Web APIs"
                ],
                correctIndex: 1
            },
            {
                type: "question",
                question: "What will be the output order of the following code snippet?",
                code: `console.log("Start");
setTimeout(() => console.log("Timeout"), 0);
Promise.resolve().then(() => console.log("Promise"));
console.log("End");`,
                options: [
                    "Start, Timeout, Promise, End",
                    "Start, End, Timeout, Promise",
                    "Start, End, Promise, Timeout",
                    "Start, Promise, End, Timeout"
                ],
                correctIndex: 2
            },
{
        type: "question",
        question: "What is the primary difference between Promise.all() and Promise.allSettled()?",
        options: [
            "all() settles when all promises complete, allSettled() when first promise completes",
            "all() rejects if any promise rejects, allSettled() always resolves with all outcomes",
            "all() works only with arrays, allSettled() works with any iterable",
            "all() executes promises sequentially, allSettled() executes in parallel"
        ],
        correctIndex: 1
    },
            {
                type: "question",
                question: "Which regex pattern correctly matches a string that starts with 'abc' and ends with 'xyz'?",
                options: [
                    "/^abc.*xyz$/",
                    "/abc.*xyz/",
                    "/^abc.*xyz/",
                    "/abc.*xyz$/"
                ],
                correctIndex: 0
            },
            {
                type: "question",
                question: "What does the regex quantifier {2,4} mean?",
                options: [
                    "Match exactly 2 or 4 repetitions",
                    "Match between 2 and 4 repetitions",
                    "Match at least 2 repetitions",
                    "Match zero or more repetitions"
                ],
                correctIndex: 1
            },
            {
                type: "task",
                title: "Implement: Async/Await with Error Handling",
                content: "Write an async function that fetches user data from a simulated API (use setTimeout and Promise). Handle success and failure cases using try/catch."
            },
            {
                type: "task",
                title: "Implement: Regex for Password Validation",
                content: "Create a regex pattern that validates passwords with at least 8 characters, including uppercase, lowercase, digits, and special characters."
            },
            {
                type: "search-task",
                title: "Research: Differences Between Callbacks, Promises, and Async/Await",
                content: "Explain the differences, advantages, and disadvantages of callbacks, promises, and async/await in JavaScript asynchronous programming."
            },
            {
                type: "search-task",
                title: "Research: Event Loop and Microtasks vs Macrotasks",
                content: "Investigate how the JavaScript event loop handles microtasks and macrotasks, and how this affects the execution order of asynchronous code."
            },
        ];
        // ==================== TEMPLATE RENDERING ====================
        // Functions to render the content - you don't need to modify these
        
        // Set lecture title and subtitle
        document.getElementById('lecture-title').textContent = lectureConfig.title;
        document.getElementById('lecture-subtitle').textContent = lectureConfig.subtitle;
        
        // Render tabs and content
        function renderTabsAndContent() {
            const tabsContainer = document.getElementById('tabs-container');
            const contentContainer = document.getElementById('tab-content-container');
            
            // Create tabs
            const tabs = document.createElement('div');
            tabs.className = 'tabs';
            
            // Create tab content areas
            lectureContent.forEach((content, index) => {
                // Create tab
                const tab = document.createElement('div');
                tab.className = 'tab' + (index === 0 ? ' active' : '');
                tab.textContent = content.tabTitle;
                tab.onclick = () => switchTab(index);
                tabs.appendChild(tab);
                
                // Create content
                const tabContent = document.createElement('div');
                tabContent.className = 'tab-content' + (index === 0 ? ' active' : '');
                tabContent.id = 'tab-' + index;
                
                // Add title
                const title = document.createElement('h3');
                title.textContent = content.title;
                tabContent.appendChild(title);
                
                // Add code content
                const pre = document.createElement('pre');
                const code = document.createElement('code');
                code.textContent = content.content;
                pre.appendChild(code);
                tabContent.appendChild(pre);

                // Add table if exists
                if (content.table) {
                    const table = document.createElement('table');
                    table.className = 'comparison-table';
                    
                    // Create header
                    const thead = document.createElement('thead');
                    const headerRow = document.createElement('tr');
                    content.table.headers.forEach(headerText => {
                        const th = document.createElement('th');
                        th.textContent = headerText;
                        headerRow.appendChild(th);
                    });
                    thead.appendChild(headerRow);
                    table.appendChild(thead);
                    
                    // Create body
                    const tbody = document.createElement('tbody');
                    content.table.rows.forEach(rowData => {
                        const row = document.createElement('tr');
                        rowData.forEach(cellData => {
                            const td = document.createElement('td');
                            td.textContent = cellData;
                            row.appendChild(td);
                        });
                        tbody.appendChild(row);
                    });
                    table.appendChild(tbody);
                    
                    tabContent.appendChild(table);
                }
                
                
                contentContainer.appendChild(tabContent);
            });
            
            tabsContainer.appendChild(tabs);
        }
        
        // Switch tabs function
        function switchTab(index) {
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Add active class to clicked tab
            tabs[index].classList.add('active');
            
            // Hide all tab content
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById('tab-' + index).classList.add('active');
        }
        
        // Render questions and tasks
        function renderQuestions() {
            const container = document.getElementById('questions-container');
            
            questions.forEach((q, index) => {
                if (q.type === 'question') {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    
                    const questionTitle = document.createElement('h3');
                    questionTitle.textContent = `Question ${index + 1}: ${q.question}`;
                    questionDiv.appendChild(questionTitle);
                    
                    if (q.code) {
                        const pre = document.createElement('pre');
                        const code = document.createElement('code');
                        code.textContent = q.code;
                        pre.appendChild(code);
                        questionDiv.appendChild(pre);
                    }
                    
                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';
                    
                    q.options.forEach((option, optIndex) => {
                        const optionDiv = document.createElement('div');
                        optionDiv.className = 'option';
                        optionDiv.textContent = option;
                        optionDiv.onclick = function() {
                            checkAnswer(this, optIndex === q.correctIndex ? 'correct' : 'incorrect');
                        };
                        optionsDiv.appendChild(optionDiv);
                    });
                    
                    questionDiv.appendChild(optionsDiv);
                    
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'result';
                    resultDiv.id = 'result-' + index;
                    questionDiv.appendChild(resultDiv);
                    
                    container.appendChild(questionDiv);
                } else if (q.type === 'task') {
                    const taskDiv = document.createElement('div');
                    taskDiv.className = 'task';
                    
                    const taskTitle = document.createElement('h3');
                    taskTitle.textContent = q.title;
                    taskDiv.appendChild(taskTitle);
                    
                    const taskContent = document.createElement('p');
                    taskContent.textContent = q.content;
                    taskDiv.appendChild(taskContent);
                    
                    container.appendChild(taskDiv);
                } else if (q.type === 'search-task') {
                    const searchTaskDiv = document.createElement('div');
                    searchTaskDiv.className = 'search-task';
                    
                    const taskTitle = document.createElement('h3');
                    taskTitle.textContent = q.title;
                    searchTaskDiv.appendChild(taskTitle);
                    
                    const taskContent = document.createElement('p');
                    taskContent.textContent = q.content;
                    searchTaskDiv.appendChild(taskContent);
                    
                    container.appendChild(searchTaskDiv);
                }
            });
        }
        
        // Check answer function
        function checkAnswer(element, type) {
            const options = element.parentElement.querySelectorAll('.option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                opt.onclick = null;
            });
            
            element.classList.add(type);
            
            const resultId = element.closest('.question').querySelector('.result').id;
            const resultDiv = document.getElementById(resultId);
            resultDiv.style.display = 'block';
            
            if (type === 'correct') {
                resultDiv.innerHTML = '<p style="color: #155724">✅ Correct! Good job.</p>';
                resultDiv.style.backgroundColor = '#d4edda';
            } else {
                resultDiv.innerHTML = '<p style="color: #721c24">❌ Incorrect. Try to understand why.</p>';
                resultDiv.style.backgroundColor = '#f8d7da';
            }
        }
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            renderTabsAndContent();
            renderQuestions();
        });
    </script>
</body>
</html>